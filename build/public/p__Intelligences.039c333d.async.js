(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{AhU0:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,n("cWXX");var l=a(n("/ezw")),s=a(n("q1tI"));function i(){return s.default.createElement("div",{style:{padding:"0 24px"}},s.default.createElement(l.default,{title:!1,active:!0,paragraph:{width:"100%",rows:6}}))}},DJ9g:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_INTELLIGENCES_FAIL=t.REFRESH_INTELLIGENCES_SUCCESS=t.REFRESH_INTELLIGENCES=t.RESET_INTELLIGENCES=void 0;var a="intelligences/resetIntelligences";t.RESET_INTELLIGENCES=a;var l="intelligences/refreshIntelligences";t.REFRESH_INTELLIGENCES=l;var s="intelligences/refreshIntelligencesSuccess";t.REFRESH_INTELLIGENCES_SUCCESS=s;var i="intelligences/refreshIntelligencesFail";t.REFRESH_INTELLIGENCES_FAIL=i},L5dd:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Intelligences=void 0,n("g9YV");var l=a(n("wCAj"));n("14J3");var s=a(n("BMrR"));n("qVdP");var i=a(n("jsC+"));n("jCWc");var r=a(n("kPKH"));n("Pwec");var o=a(n("CtXQ"));n("lUTK");var u=a(n("BvKs"));n("R9oj");var c=a(n("ECub")),d=a(n("p0pE"));n("miYZ");var f=a(n("tsqr")),g=a(n("d6i3")),p=a(n("1l/V"));n("sRBo");var m=a(n("kaz8"));n("+L6B");var h=a(n("2/Rp"));n("5NDa");var E=a(n("5rEg")),v=a(n("2Taf")),I=a(n("vZ4D")),y=a(n("MhPg")),S=a(n("l4Ni")),w=a(n("ujKo"));n("T2oS");var C=a(n("W9HT")),b=a(n("fFZ8")),R=n("Y2fQ"),k=n("Hx5s"),M=a(n("EVdn")),T=a(n("s/Ur")),F=a(n("q1tI")),D=a(n("LlRK")),N=a(n("LvDl")),A=n("MuoO"),L=a(n("Wgwc")),x=a(n("vOnD")),H=a(n("AhU0")),P=n("cC0H"),_=n("IvyP"),B=a(n("IE/S")),K=n("ydnR"),G=a(n("Ufck"));function U(e){var t=z();return function(){var n,a=(0,w.default)(e);if(t){var l=(0,w.default)(this).constructor;n=Reflect.construct(a,arguments,l)}else n=a.apply(this,arguments);return(0,S.default)(this,n)}}function z(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(){var e=(0,b.default)(["\n  padding: 100px 0;\n"]);return O=function(){return e},e}var V=x.default.div(O()),j=F.default.createElement("div",{style:{textAlign:"center",paddingTop:10,paddingBottom:10}},F.default.createElement(C.default,null)),W=function(e){(0,y.default)(n,e);var t=U(n);function n(e){var a;return(0,v.default)(this,n),a=t.call(this,e),a.search=function(){a.setState({selectedRowKeys:[],selectedRows:[]}),a.props.dispatch((0,P.resetIntelligences)()),a.loadMoreIntelligences(null)},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,l=t.selectedKeys,s=t.confirm,i=t.clearFilters;return F.default.createElement("div",{style:{padding:8}},F.default.createElement(E.default,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:l[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(l,s,e)},style:{width:250,marginBottom:8,display:"block"}}),F.default.createElement(h.default,{type:"primary",onClick:function(){return a.handleSearch(l&&l[0],s,e)},size:"small",style:{width:90,marginRight:8}},F.default.createElement(R.FormattedMessage,{id:"app.common.messages.search"})),F.default.createElement(h.default,{onClick:function(){return a.handleReset(i,e)},size:"small",style:{width:90}},F.default.createElement(R.FormattedMessage,{id:"app.common.messages.reset"})))},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})}}},a.getColumnCheckboxProps=function(e,t){return{filterDropdown:function(n){var l=n.setSelectedKeys,s=n.selectedKeys,i=n.confirm,r=n.clearFilters;return F.default.createElement("div",{style:{padding:8},className:"intelligences-checkboxgroup"},F.default.createElement(m.default.Group,{options:t,defaultValue:s,onChange:function(t){a.filterConditions[e]=t,l(t)}}),F.default.createElement("div",null,F.default.createElement(h.default,{type:"primary",onClick:function(){return a.handleSearch(s,i,e)},size:"small",style:{width:90,marginRight:8}},F.default.createElement(R.FormattedMessage,{id:"app.common.messages.search"})),F.default.createElement(h.default,{onClick:function(){return a.handleReset(r,e)},size:"small",style:{width:90}},F.default.createElement(R.FormattedMessage,{id:"app.common.messages.reset"}))))}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e}),a.filterConditions[n]=e,a.search()},a.handleReset=function(e,t){e(),a.setState({searchText:""}),delete a.filterConditions[t],a.search()},a.props.dispatch((0,P.resetIntelligences)()),a.state={selectedRowKeys:[],selectedRows:[],loadingMore:!1,loadingIntelligencesData:!0,contentHeight:window.innerHeight,drawerVisiable:!1,selectedTask:void 0,operationBtns:{pausing:!1,resuming:!1,deleting:!1}},a.filterConditions={},a.lastScrollHeight=0,a.resizeTimeoutHandler=void 0,(0,M.default)(window).unbind("resize"),(0,M.default)(window).bind("resize",function(){clearTimeout(a.resizeTimeoutHandler),a.resizeTimeoutHandler=setTimeout(function(){a.setState({contentHeight:window.innerHeight})},500)}),a}return(0,I.default)(n,[{key:"componentDidMount",value:function(){this.initIntelligencesData()}},{key:"componentDidUpdate",value:function(){var e=this;(0,M.default)(".intelligence-table-container .ant-table-body").unbind("scroll"),(0,M.default)(".intelligence-table-container .ant-table-body").bind("scroll",function(){var t=(0,M.default)(".intelligence-table-container .ant-table-body").scrollTop(),n=(0,M.default)(".intelligence-table-container .ant-table-body").outerHeight(),a=document.querySelector(".intelligence-table-container .ant-table-body"),l=a.scrollHeight;l-t-n<200&&e.props.intelligences.nextCursor&&(e.state.loadingMore||(e.lastScrollHeight=l,e.loadMoreIntelligences()))})}},{key:"componentWillUnmount",value:function(){(0,M.default)(window).unbind("resize")}},{key:"onShowDrawer",value:function(e){this.setState({drawerVisiable:!0,selectedTask:e})}},{key:"onCloseDrawer",value:function(){this.setState({drawerVisiable:!1,selectedTask:void 0})}},{key:"onPauseAll",value:function(){var e=(0,p.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),this.setState({operationBtns:{pausing:!0,deleting:!1,resuming:!1}}),e.next=5,(0,_.pauseIntelligencesForManagementAPI)(this.filterConditions.url,t,this.filterConditions.state);case 5:this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}}),this.initIntelligencesData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onResumeAll",value:function(){var e=(0,p.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!0}}),e.next=5,(0,_.resumeIntelligencesForManagementAPI)(this.filterConditions.url,t,this.filterConditions.state);case 5:this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}}),this.initIntelligencesData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onDeleteAll",value:function(){var e=(0,p.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),this.setState({operationBtns:{pausing:!1,deleting:!0,resuming:!1}}),e.next=5,(0,_.deleteIntelligencesOrHistoryForManagementAPI)(this.filterConditions.url,t,this.filterConditions.state);case 5:f.default.success((0,R.formatMessage)({id:"app.containers.Intelligences.deleteAllSuccessful"})),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}}),this.initIntelligencesData(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMoreIntelligences",value:function(e){var t=this;this.setState({loadingMore:!0}),void 0===e&&(e=this.props.intelligences.nextCursor),(0,_.getIntelligencesOrHistoryForManagementAPI)(e,this.filterConditions.url,this.filterConditions.state).then(function(e){t.props.dispatch((0,P.refreshIntelligencesSuccess)(e)),t.setState({loadingMore:!1})},function(e){t.props.dispatch((0,P.refreshIntelligencesFail)(e)),t.setState({loadingMore:!1})})}},{key:"initIntelligencesData",value:function(){var e=this;this.props.dispatch((0,P.resetIntelligences)()),this.setState({loadingIntelligencesData:!0,selectedRowKeys:[],selectedRows:[]}),(0,_.getIntelligencesOrHistoryForManagementAPI)(void 0,this.filterConditions.url,this.filterConditions.state).then(function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,P.refreshIntelligencesSuccess)(t))},function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,P.refreshIntelligencesFail)(t))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingIntelligencesData,a=t.contentHeight,f=t.loadingMore,g=t.drawerVisiable,p=t.selectedTask,m=this.props.intelligences,E=F.default.createElement(H.default,null),v=[(0,d.default)({title:"Target URL",dataIndex:"url",filteredValue:this.filterConditions.url},this.getColumnSearchProps("url")),(0,d.default)({title:(0,R.formatMessage)({id:"app.common.messages.state"}),dataIndex:"system.state",render:function(e){return F.default.createElement(B.default,{state:e})},filteredValue:this.filterConditions.state},this.getColumnCheckboxProps("state",[{label:(0,R.formatMessage)({id:"app.common.messages.stateDraft"}),value:"DRAFT"},{label:(0,R.formatMessage)({id:"app.common.messages.stateConfigured"}),value:"CONFIGURED"},{label:(0,R.formatMessage)({id:"app.common.messages.stateFinished"}),value:"FINISHED"},{label:(0,R.formatMessage)({id:"app.common.messages.stateRunning"}),value:"RUNNING"},{label:(0,R.formatMessage)({id:"app.common.messages.stateFailed"}),value:"FAILED"},{label:(0,R.formatMessage)({id:"app.common.messages.statePaused"}),value:"PAUSED"},{label:(0,R.formatMessage)({id:"app.common.messages.stateTimeout"}),value:"TIMEOUT"}])),{title:(0,R.formatMessage)({id:"app.common.messages.analystState"}),dataIndex:"soi.state",render:function(e){var t=e;return t===K.STATES.failed?t=K.STATES.lostConnection:t===K.STATES.active&&(t=K.STATES.connected),F.default.createElement(B.default,{state:t})}},{title:"Last Modified At",dataIndex:"system.modified",render:function(e){return(0,L.default)(e).format("YYYY/MM/DD HH:mm:ss")}}],I={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t,selectedRows:n})}};if(!n)if(m.data&&m.data.length||N.default.keys(this.filterConditions).length){var y=m&&m.total||0;this.state.selectedRows&&this.state.selectedRows.length&&(y=this.state.selectedRows.length);var S=!1;(this.state.operationBtns.pausing||this.state.operationBtns.resuming||this.state.operationBtns.deleting)&&(S=!0),y&&!n||(S=!0);var w=F.default.createElement(u.default,null,F.default.createElement(u.default.Item,null,F.default.createElement(h.default,{type:"link",onClick:function(){e.onPauseAll()},disabled:S,loading:this.state.operationBtns.pausing},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.pauseAll",values:{intelligenceNumber:y}}))),F.default.createElement(u.default.Item,null,F.default.createElement(h.default,{type:"link",onClick:function(){e.onResumeAll()},disabled:S,loading:this.state.operationBtns.resuming},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.resumeAll",values:{intelligenceNumber:y}}))),F.default.createElement(u.default.Item,null,F.default.createElement(h.default,{type:"link",onClick:function(){e.onDeleteAll()},disabled:S,loading:this.state.operationBtns.deleting},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:y}})))),C=F.default.createElement("div",{style:{display:"inline-block"}},F.default.createElement("div",{style:{display:"inline-block"}},F.default.createElement("span",null,F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.showIntelligences",values:{intelligencesNumber:N.default.get(m,"data.length"),intelligencesTotal:m.total}}))),F.default.createElement(h.default,{type:"link",onClick:function(){return e.initIntelligencesData()},disabled:n},F.default.createElement(D.default,{date:m.modified}),F.default.createElement(o.default,{type:"sync",style:{verticalAlign:"middle",marginLeft:"5px"},spin:n})));E=F.default.createElement("div",{className:"intelligence-table-container"},F.default.createElement("div",null,F.default.createElement("div",{style:{paddingBottom:"15px"}},F.default.createElement(s.default,null,F.default.createElement(T.default,{minWidth:1444},F.default.createElement(r.default,{span:14},F.default.createElement(h.default,{onClick:function(){e.onPauseAll()},disabled:S,loading:this.state.operationBtns.pausing},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.pauseAll",values:{intelligenceNumber:y}})),F.default.createElement(h.default,{onClick:function(){e.onResumeAll()},style:{marginLeft:"10px"},disabled:S,loading:this.state.operationBtns.resuming},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.resumeAll",values:{intelligenceNumber:y}})),F.default.createElement(h.default,{onClick:function(){e.onDeleteAll()},style:{marginLeft:"10px"},disabled:S,loading:this.state.operationBtns.deleting},F.default.createElement(R.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:y}}))),F.default.createElement(r.default,{span:10,style:{textAlign:"right"}},C)),F.default.createElement(T.default,{maxWidth:1444},F.default.createElement(r.default,{span:3},F.default.createElement(i.default,{overlay:w},F.default.createElement(h.default,null,F.default.createElement(o.default,{type:"menu"})))),F.default.createElement(r.default,{span:21,style:{textAlign:"right"}},C)))),F.default.createElement(l.default,{className:"",pagination:!1,bordered:!0,columns:v,rowSelection:I,dataSource:m.data,rowKey:function(e){return e.globalId},scroll:{y:a-310},onRow:function(t){return{onClick:function(){e.onShowDrawer(t)}}}}),f?j:""))}else E=F.default.createElement(V,null,F.default.createElement(c.default,{description:F.default.createElement("span",null,F.default.createElement(R.FormattedHTMLMessage,{id:"app.containers.Intelligences.emptyIntelligences"}))}));return F.default.createElement("div",{style:{padding:"20px"}},F.default.createElement(k.PageHeaderWrapper,null,E,F.default.createElement(G.default,{visiable:g,onCloseDrawer:function(){e.onCloseDrawer()},task:p})))}}],[{key:"onPreventShowDrawer",value:function(e){e.preventDefault(),e.stopPropagation()}}]),n}(F.default.Component);t.Intelligences=W;var Y=(0,A.connect)(function(e){var t=e.intelligences;return{intelligences:t}})(W);t.default=Y},WMyo:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n("L5dd")),s=a(n("q1tI")),i=function(){return s.default.createElement(l.default,null)};t.default=i},cC0H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetIntelligences=l,t.refreshIntelligences=s,t.refreshIntelligencesSuccess=i,t.refreshIntelligencesFail=r;var a=n("DJ9g");function l(){return{type:a.RESET_INTELLIGENCES}}function s(){return{type:a.REFRESH_INTELLIGENCES}}function i(e){return{type:a.REFRESH_INTELLIGENCES_SUCCESS,total:e.total,intelligences:e.intelligences,nextCursor:e.nextCursor,previousCursor:e.previousCursor}}function r(e){return{type:a.REFRESH_INTELLIGENCES_FAIL,error:e}}}}]);