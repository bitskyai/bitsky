(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"4aNd":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RetailersNew=void 0,a("g9YV");var l=r(a("wCAj"));a("14J3");var n=r(a("BMrR"));a("Pwec");var s=r(a("CtXQ"));a("jCWc");var i=r(a("kPKH"));a("R9oj");var o=r(a("ECub"));a("P2fV");var d=r(a("NJEC"));a("5Dmo");var u=r(a("3S7+"));a("+L6B");var c=r(a("2/Rp"));a("miYZ");var f=r(a("tsqr")),p=r(a("2Taf")),m=r(a("vZ4D")),g=r(a("MhPg")),E=r(a("l4Ni")),h=r(a("ujKo")),R=r(a("fFZ8")),v=a("Y2fQ"),M=a("Hx5s"),y=r(a("q1tI")),b=r(a("LlRK")),S=a("MuoO"),D=r(a("vOnD")),T=r(a("FaxJ")),w=r(a("BZPu")),P=a("X2rZ"),k=a("vu0V"),I=a("ydnR"),L=r(a("IE/S"));function C(e){var t=x();return function(){var a,r=(0,h.default)(e);if(t){var l=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,l)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function F(){var e=(0,R.default)(["\n  padding: 100px 0;\n"]);return F=function(){return e},e}a("z3/+");var H=D.default.div(F()),A={margin:"0 0 0 0"},_=function(e){(0,g.default)(a,e);var t=C(a);function a(e){var r;return(0,p.default)(this,a),r=t.call(this,e),r.state={loadingData:!0,selectedRowKeys:[],drawerVisiable:!1,selectedRetailer:void 0},r}return(0,m.default)(a,[{key:"componentDidMount",value:function(){this.initRetailersData()}},{key:"onRegisterRetailer",value:function(){this.setState({drawerVisiable:!0,selectedRetailer:void 0})}},{key:"onShowDrawer",value:function(e){this.setState({drawerVisiable:!0,selectedRetailer:e})}},{key:"onCloseDrawer",value:function(){this.setState({drawerVisiable:!1,selectedRetailer:void 0})}},{key:"onDeleteARetailer",value:function(e,t){var a=this;t.preventDefault(),t.stopPropagation(),(0,k.deleteARetailerAPI)(e.globalId).then(function(){a.props.dispatch((0,P.refreshRetailers)());var e=(0,v.formatMessage)({id:"app.containers.Retailers.deleteRetailerSuccessful"});f.default.success(e)},function(e){f.default.error(e)})}},{key:"onPingRetailer",value:function(e,t){var a=this;t.preventDefault(),t.stopPropagation(),(0,k.pingRetailerAPI)(e.globalId).then(function(e){e&&e.state===I.STATES.active?f.default.success(y.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,v.formatMessage)({id:"app.containers.Retailers.pingSuccessful"})}})):f.default.error(y.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,v.formatMessage)({id:"app.containers.Retailers.pingFail"})}})),a.props.dispatch((0,P.refreshRetailers)())},function(){f.default.error((0,v.formatMessage)({id:"app.containers.Retailers.pingFail"})),a.props.dispatch((0,P.refreshRetailers)())})}},{key:"initRetailersData",value:function(){var e=this;this.setState({loadingData:!0}),(0,k.getRetailers)().then(function(t){e.setState({loadingData:!0}),e.props.dispatch((0,P.refreshRetailersSuccess)(t))},function(t){e.setState({loadingData:!0}),e.props.dispatch((0,P.refreshRetailersFail)(t))})}},{key:"render",value:function(){var e=this,t=this.state,r=t.loadingData,f=t.drawerVisiable,p=t.selectedRetailer,m=t.selectedRowKeys,g=this.props.retailersData.data,E=this.props.retailersData.modifiedAt,h=y.default.createElement(T.default,null),R=[{title:(0,v.formatMessage)({id:"app.containers.Retailers.retailerName"}),dataIndex:"name"},{title:(0,v.formatMessage)({id:"app.containers.Retailers.baseURL"}),dataIndex:"baseURL"},{title:(0,v.formatMessage)({id:"app.common.messages.connection"}),dataIndex:"system.state",render:function(e){var t=e;return t===I.STATES.failed?t=I.STATES.lostConnection:t===I.STATES.active&&(t=I.STATES.connected),y.default.createElement(L.default,{state:t})}},{title:"Action",dataIndex:"",key:"x",render:function(t,r){return y.default.createElement("div",{onClick:function(e){a.onPreventShowDrawer(e)}},y.default.createElement(u.default,{title:(0,v.formatMessage)({id:"app.containers.Retailers.pingDescription"})},y.default.createElement(c.default,{type:"link",size:"small",style:A,title:(0,v.formatMessage)({id:"app.containers.Retailers.pingDescription"}),onClick:function(t){e.onPingRetailer(r,t)}},(0,v.formatMessage)({id:"app.containers.Retailers.ping"}))),y.default.createElement(d.default,{style:{maxWidth:"300px"},title:(0,v.formatMessage)({id:"app.containers.Retailers.deleteRetailerDescription"}),onConfirm:function(t){e.onDeleteARetailer(r,t)},onCancel:function(e){a.onClickCancel(r,e)},okText:(0,v.formatMessage)({id:"app.common.messages.yes"}),cancelText:(0,v.formatMessage)({id:"app.common.messages.no"})},y.default.createElement(c.default,{type:"link",size:"small",style:A,onClick:function(e){a.onClickDelete(r,e)}},(0,v.formatMessage)({id:"app.common.messages.delete"}))))}}];return r&&(h=g&&g.length?y.default.createElement("div",{className:"retailers-table-container"},y.default.createElement("div",null,y.default.createElement("div",{style:{paddingBottom:"15px"}},y.default.createElement(n.default,null,y.default.createElement(i.default,{span:14},y.default.createElement(u.default,{title:(0,v.formatMessage)({id:"app.containers.Retailers.drawerTitle"})},y.default.createElement(c.default,{onClick:function(){e.onRegisterRetailer()},type:"primary"},(0,v.formatMessage)({id:"app.common.messages.create"})))),y.default.createElement(i.default,{span:10,style:{textAlign:"right"}},y.default.createElement(c.default,{type:"link",onClick:function(){return e.initRetailersData()}},y.default.createElement(b.default,{date:E}),y.default.createElement(s.default,{type:"sync",style:{verticalAlign:"middle",marginLeft:"5px"}}))))),y.default.createElement("div",{style:{backgroundColor:"white"}},y.default.createElement(l.default,{bordered:!0,pagination:!1,rowClassName:function(e){var t=!1;return m.forEach(function(a){a===e.globalId&&(t=!0)}),t?"selected-row":""},columns:R,dataSource:g,rowKey:function(e){return e.globalId},onRow:function(t){return{onClick:function(){e.setState({selectedRowKeys:[t.globalId]}),e.onShowDrawer(t)}}}})))):y.default.createElement(H,null,y.default.createElement(o.default,{description:y.default.createElement("span",null,y.default.createElement(v.FormattedHTMLMessage,{id:"app.containers.Retailers.emptyRetailers"}))},y.default.createElement(u.default,{title:(0,v.formatMessage)({id:"app.containers.Retailers.drawerTitle"})},y.default.createElement(c.default,{type:"primary",onClick:function(){e.onRegisterRetailer()}},(0,v.formatMessage)({id:"app.common.messages.create"})))))),y.default.createElement("div",{style:{padding:"20px"}},y.default.createElement(M.PageHeaderWrapper,null,h,y.default.createElement(w.default,{visiable:f,onCloseDrawer:function(){e.onCloseDrawer()},retailer:p,dispatch:this.props.dispatch})))}}],[{key:"onPreventShowDrawer",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"onClickCancel",value:function(e,t){t.preventDefault(),t.stopPropagation()}},{key:"onClickDelete",value:function(e,t){t.preventDefault(),t.stopPropagation()}}]),a}(y.default.Component);t.RetailersNew=_;var O=(0,S.connect)(function(e){var t=e.retailers;return{retailersData:t}})(_);t.default=O},"6OJB":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("q1tI")),n=r(a("4aNd")),s=function(){return l.default.createElement(n.default,null)};t.default=s},BZPu:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var l=r(a("/wGt"));a("+L6B");var n=r(a("2/Rp"));a("14J3");var s=r(a("BMrR"));a("jCWc");var i=r(a("kPKH"));a("OaEy");var o=r(a("2fM7"));a("fOrg");var d=r(a("+KLJ"));a("y8nQ");var u=r(a("Vl3Y"));a("5NDa");var c=r(a("5rEg"));a("/zsF");var f=r(a("PArb")),p=r(a("p0pE")),m=r(a("d6i3"));a("miYZ");var g=r(a("tsqr")),E=r(a("1l/V")),h=r(a("2Taf")),R=r(a("vZ4D")),v=r(a("MhPg")),M=r(a("l4Ni")),y=r(a("ujKo")),b=r(a("fFZ8"));a("fu2T");var S=r(a("gK9i"));a("tU7J");var D=r(a("wFql")),T=a("Y2fQ"),w=r(a("q1tI")),P=r(a("LvDl")),k=r(a("vOnD")),I=a("+n12"),L=a("X2rZ"),C=a("vu0V");function x(e){var t=F();return function(){var a,r=(0,y.default)(e);if(t){var l=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,l)}else a=r.apply(this,arguments);return(0,M.default)(this,a)}}function F(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function H(){var e=(0,b.default)(["\n  padding: 5px 0;\n  margin-bottom: 0 !important;\n"]);return H=function(){return e},e}var A=D.default.Paragraph,_=S.default.Panel,O=(0,k.default)(A)(H()),V={marginBottom:0},U=function(e){(0,v.default)(a,e);var t=x(a);function a(){var e;(0,h.default)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return e=t.call.apply(t,[this].concat(l)),e.state={sending:!1},e.registerRetailer=function(t){t.preventDefault(),e.setState({sending:!0}),e.props.form.validateFieldsAndScroll(function(){var t=(0,E.default)(m.default.mark(function t(a,r){var l;return m.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=23;break}if(t.prev=1,!e.props.retailer){t.next=9;break}return r.globalId=e.props.retailer.globalId,t.next=6,(0,C.updateRetailer)(r);case 6:e.props.dispatch((0,L.refreshRetailers)()),t.next=12;break;case 9:return t.next=11,(0,C.registerARetailer)(r);case 11:e.props.dispatch((0,L.refreshRetailers)());case 12:l=(0,T.formatMessage)({id:"app.containers.Retailers.registerRetailerSuccessful"}),g.default.success(l),e.setState({sending:!1}),e.props.onCloseDrawer(),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1),e.setState({sending:!1});case 21:t.next=24;break;case 23:e.setState({sending:!1});case 24:case"end":return t.stop()}},t,null,[[1,18]])}));return function(e,a){return t.apply(this,arguments)}}())},e}return(0,R.default)(a,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldsValue,a=e.getFieldDecorator,r=e.isFieldsTouched,m=this.props.retailer,g=!0,E=(0,T.formatMessage)({id:"app.containers.Retailers.drawerTitle"}),h=(0,T.formatMessage)({id:"app.common.messages.create"});if(this.props.retailer&&this.props.retailer.globalId&&(E=(0,T.formatMessage)({id:"app.containers.Retailers.drawerTitleUpdate"}),h=(0,T.formatMessage)({id:"app.common.messages.save"})),r()){var R=t();R.globalId=m&&m.globalId,R=(0,p.default)({},m,R),R=(0,I.filterOutEmptyValue)(R),m=(0,I.filterOutEmptyValue)(m),g=!!P.default.isEqual(R,m)}return w.default.createElement("div",null,w.default.createElement(l.default,{destroyOnClose:!0,title:E,width:720,onClose:this.props.onCloseDrawer,visible:this.props.visiable},w.default.createElement("p",null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.registerRetailerDescription"})),w.default.createElement(f.default,null),w.default.createElement(u.default,{layout:"vertical",style:{paddingBottom:"35px"}},w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.containers.Retailers.retailerName"}),style:V},a("name",{initialValue:this.props.retailer&&this.props.retailer.name,rules:[{required:!0,message:(0,T.formatMessage)({id:"app.containers.Retailers.retailerNamePlaceholder"})},{min:1,max:100,message:(0,T.formatMessage)({id:"app.containers.Retailers.retailerNameInvalid"})}]})(w.default.createElement(c.default,{placeholder:(0,T.formatMessage)({id:"app.containers.Retailers.retailerNameExample"})})),w.default.createElement(O,null,(0,T.formatMessage)({id:"app.containers.Retailers.retailerNameDescription"}))),w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.common.messages.globalId"}),style:V},this.props.retailer?a("globalId",{rules:[]})(w.default.createElement(A,{copyable:!0},this.props.retailer.globalId)):w.default.createElement(A,null,w.default.createElement("code",null,(0,T.formatMessage)({id:"app.common.messages.globalIdEmpty"}))),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.globalIdDescription"}))),w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.containers.Retailers.baseURL"}),style:V},a("baseURL",{initialValue:this.props.retailer&&this.props.retailer.baseURL,rules:[{required:!0,message:(0,T.formatMessage)({id:"app.containers.Retailers.baseURLEmptyError"})},{pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)([a-z0-9\.])*(:[0-9]{1,5})?(\/.*)?$/i,message:(0,T.formatMessage)({id:"app.containers.Retailers.baseURLEmptyError"})}]})(w.default.createElement(c.default,{placeholder:(0,T.formatMessage)({id:"app.containers.Retailers.baseURLExample"})})),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.baseURLDescription"}))),w.default.createElement(S.default,null,w.default.createElement(_,{header:(0,T.formatMessage)({id:"app.common.messages.advanced"})},w.default.createElement(d.default,{message:(0,T.formatMessage)({id:"app.common.messages.advancedDescription"}),type:"warning",style:{marginBottom:"16px"}}),w.default.createElement("h3",null,w.default.createElement(T.FormattedMessage,{id:"app.containers.Retailers.callbackSectionTitle"})),w.default.createElement("p",null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.callbackDescription"})),w.default.createElement(s.default,{gutter:16},w.default.createElement(i.default,{span:8},w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethod"}),style:V},a("callback.method",{initialValue:P.default.get(this,"props.retailer.callback.method","POST"),rules:[{required:!0,message:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})}]})(w.default.createElement(o.default,{placeholder:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})},w.default.createElement(o.default.Option,{value:"GET"},"GET"),w.default.createElement(o.default.Option,{value:"POST"},"POST"),w.default.createElement(o.default.Option,{value:"PUT"},"PUT"),w.default.createElement(o.default.Option,{value:"DELETE"},"DELETE"))),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.httpMethodDescription"})))),w.default.createElement(i.default,{span:16},w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.common.messages.urlPath"}),style:V},a("callback.path",{initialValue:P.default.get(this,"props.retailer.callback.path","/apis/tasks"),rules:[{required:!0,message:(0,T.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})}]})(w.default.createElement(c.default,{placeholder:(0,T.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})})),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.common.messages.urlPathDescription"}))))),w.default.createElement("h3",null,w.default.createElement(T.FormattedMessage,{id:"app.common.messages.healthTitle"})),w.default.createElement("p",null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.healthDescription"})),w.default.createElement(s.default,{gutter:16},w.default.createElement(i.default,{span:8},w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethod"}),style:V},a("health.method",{initialValue:P.default.get(this,"props.retailer.health.method","GET"),rules:[{required:!0,message:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})}]})(w.default.createElement(o.default,{placeholder:(0,T.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})},w.default.createElement(o.default.Option,{value:"GET"},"GET"),w.default.createElement(o.default.Option,{value:"POST"},"POST"),w.default.createElement(o.default.Option,{value:"PUT"},"PUT"),w.default.createElement(o.default.Option,{value:"DELETE"},"DELETE"))),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.containers.Retailers.httpMethodDescription"})))),w.default.createElement(i.default,{span:16},w.default.createElement(u.default.Item,{label:(0,T.formatMessage)({id:"app.common.messages.urlPath"}),style:V},a("health.path",{initialValue:P.default.get(this,"props.retailer.health.path","/health"),rules:[{required:!0,message:(0,T.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})}]})(w.default.createElement(c.default,{placeholder:(0,T.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})})),w.default.createElement(O,null,w.default.createElement(T.FormattedHTMLMessage,{id:"app.common.messages.urlPathDescription"})))))))),w.default.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},w.default.createElement(n.default,{onClick:this.props.onCloseDrawer,style:{marginRight:8}},w.default.createElement(T.FormattedMessage,{id:"app.common.messages.cancel"})),w.default.createElement(n.default,{disabled:g,loading:this.state.sending,onClick:this.registerRetailer,type:"primary"},h))))}}]),a}(w.default.Component),q=u.default.create()(U);t.default=q},FaxJ:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,a("cWXX");var l=r(a("/ezw")),n=r(a("q1tI"));function s(){return n.default.createElement("div",{style:{padding:"0 24px"}},n.default.createElement(l.default,{title:!1,active:!0,paragraph:{width:"100%",rows:6}}))}},X2rZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshRetailers=l,t.refreshRetailersSuccess=n,t.refreshRetailersFail=s;var r=a("oqzx");function l(){return{type:r.REFRESH_RETAILERS}}function n(e){return{type:r.REFRESH_RETAILERS_SUCCESS,payload:e}}function s(e){return{type:r.REFRESH_RETAILERS_FAIL,error:e}}},oqzx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_RETAILERS_FAIL=t.REFRESH_RETAILERS_SUCCESS=t.REFRESH_RETAILERS=void 0;var r="retailers/refreshRetailers";t.REFRESH_RETAILERS=r;var l="retailers/refreshRetailersSuccess";t.REFRESH_RETAILERS_SUCCESS=l;var n="retailers/refreshRetailersFail";t.REFRESH_RETAILERS_FAIL=n},"z3/+":function(e,t,a){e.exports={"selected-row":"antd-pro-containers-retailers-style.css-selected-row"}}}]);