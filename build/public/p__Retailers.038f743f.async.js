(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"4aNd":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RetailersNew=void 0,a("g9YV");var l=r(a("wCAj"));a("14J3");var n=r(a("BMrR"));a("Pwec");var s=r(a("CtXQ"));a("jCWc");var i=r(a("kPKH"));a("R9oj");var o=r(a("ECub"));a("P2fV");var d=r(a("NJEC"));a("+L6B");var u=r(a("2/Rp"));a("miYZ");var c=r(a("tsqr")),f=r(a("2Taf")),p=r(a("vZ4D")),m=r(a("MhPg")),g=r(a("l4Ni")),E=r(a("ujKo")),h=r(a("fFZ8"));a("z3/+");var R=a("Y2fQ"),v=a("Hx5s"),y=r(a("q1tI")),M=r(a("LlRK")),b=a("MuoO"),S=r(a("vOnD")),w=r(a("FaxJ")),D=r(a("BZPu")),P=a("X2rZ"),T=a("vu0V"),k=a("ydnR"),I=r(a("IE/S"));function C(e){var t=x();return function(){var a,r=(0,E.default)(e);if(t){var l=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,l)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function L(){var e=(0,h.default)(["\n  padding: 100px 0;\n"]);return L=function(){return e},e}var F=S.default.div(L()),A={margin:"0 0 0 0"},H=function(e){(0,m.default)(a,e);var t=C(a);function a(e){var r;return(0,f.default)(this,a),r=t.call(this,e),r.state={loadingData:!0,selectedRowKeys:[],drawerVisiable:!1,selectedRetailer:void 0},r}return(0,p.default)(a,[{key:"componentDidMount",value:function(){this.initRetailersData()}},{key:"onRegisterRetailer",value:function(){this.setState({drawerVisiable:!0,selectedRetailer:void 0})}},{key:"onShowDrawer",value:function(e){this.setState({drawerVisiable:!0,selectedRetailer:e})}},{key:"onCloseDrawer",value:function(){this.setState({drawerVisiable:!1,selectedRetailer:void 0})}},{key:"onDeleteARetailer",value:function(e,t){var a=this;t.preventDefault(),t.stopPropagation(),(0,T.deleteARetailerAPI)(e.globalId).then(function(){a.props.dispatch((0,P.refreshRetailers)());var e=(0,R.formatMessage)({id:"app.containers.Retailers.deleteRetailerSuccessful"});c.default.success(e)},function(e){c.default.error(e)})}},{key:"onPingRetailer",value:function(e,t){var a=this;t.preventDefault(),t.stopPropagation(),(0,T.pingRetailerAPI)(e.globalId).then(function(e){e&&e.state===k.STATES.active?c.default.success((0,R.formatMessage)({id:"app.containers.Retailers.pingSuccessful"})):c.default.error((0,R.formatMessage)({id:"app.containers.Retailers.pingFail"})),a.props.dispatch((0,P.refreshRetailers)())},function(){c.default.error((0,R.formatMessage)({id:"app.containers.Retailers.pingFail"})),a.props.dispatch((0,P.refreshRetailers)())})}},{key:"initRetailersData",value:function(){var e=this;this.setState({loadingData:!0}),(0,T.getRetailers)().then(function(t){e.setState({loadingData:!0}),e.props.dispatch((0,P.refreshRetailersSuccess)(t))},function(t){e.setState({loadingData:!0}),e.props.dispatch((0,P.refreshRetailersFail)(t))})}},{key:"render",value:function(){var e=this,t=this.state,r=t.loadingData,c=t.drawerVisiable,f=t.selectedRetailer,p=t.selectedRowKeys,m=this.props.retailersData.data,g=this.props.retailersData.modifiedAt,E=y.default.createElement(w.default,null),h=[{title:(0,R.formatMessage)({id:"app.containers.Retailers.retailerName"}),dataIndex:"name"},{title:(0,R.formatMessage)({id:"app.containers.Retailers.baseURL"}),dataIndex:"baseURL"},{title:(0,R.formatMessage)({id:"app.common.messages.connection"}),dataIndex:"system.state",render:function(e){var t=e;return t===k.STATES.failed?t=k.STATES.lostConnection:t===k.STATES.active&&(t=k.STATES.connected),y.default.createElement(I.default,{state:t})}},{title:"Action",dataIndex:"",key:"x",render:function(t,r){return y.default.createElement("div",{onClick:function(e){a.onPreventShowDrawer(e)}},y.default.createElement(u.default,{type:"link",size:"small",style:A,title:(0,R.formatMessage)({id:"app.containers.Retailers.pingDescription"}),onClick:function(t){e.onPingRetailer(r,t)}},(0,R.formatMessage)({id:"app.containers.Retailers.ping"})),y.default.createElement(d.default,{style:{maxWidth:"300px"},title:(0,R.formatMessage)({id:"app.containers.Retailers.deleteRetailerDescription"}),onConfirm:function(t){e.onDeleteARetailer(r,t)},onCancel:function(e){a.onClickCancel(r,e)},okText:(0,R.formatMessage)({id:"app.common.messages.yes"}),cancelText:(0,R.formatMessage)({id:"app.common.messages.no"})},y.default.createElement(u.default,{type:"link",size:"small",style:A,onClick:function(e){a.onClickDelete(r,e)}},(0,R.formatMessage)({id:"app.common.messages.delete"}))))}}];return r&&(E=m&&m.length?y.default.createElement("div",{className:"retailers-table-container"},y.default.createElement("div",null,y.default.createElement("div",{style:{paddingBottom:"15px"}},y.default.createElement(n.default,null,y.default.createElement(i.default,{span:14},y.default.createElement(u.default,{onClick:function(){e.onRegisterRetailer()},type:"primary"},(0,R.formatMessage)({id:"app.containers.Retailers.registerNow"}))),y.default.createElement(i.default,{span:10,style:{textAlign:"right"}},y.default.createElement(u.default,{type:"link",onClick:function(){return e.initRetailersData()}},y.default.createElement(M.default,{date:g}),y.default.createElement(s.default,{type:"sync",style:{verticalAlign:"middle",marginLeft:"5px"}}))))),y.default.createElement("div",{style:{backgroundColor:"white"}},y.default.createElement(l.default,{bordered:!0,pagination:!1,rowClassName:function(e){var t=!1;return p.forEach(function(a){a===e.globalId&&(t=!0)}),t?"selected-row":""},columns:h,dataSource:m,rowKey:function(e){return e.globalId},onRow:function(t){return{onClick:function(){e.setState({selectedRowKeys:[t.globalId]}),e.onShowDrawer(t)}}}})))):y.default.createElement(F,null,y.default.createElement(o.default,{description:y.default.createElement("span",null,y.default.createElement(R.FormattedHTMLMessage,{id:"app.containers.Retailers.emptyRetailers"}))},y.default.createElement(u.default,{type:"primary",onClick:function(){e.onRegisterRetailer()}},(0,R.formatMessage)({id:"app.containers.Retailers.registerNow"}))))),y.default.createElement("div",{style:{padding:"20px"}},y.default.createElement(v.PageHeaderWrapper,null,E,y.default.createElement(D.default,{visiable:c,onCloseDrawer:function(){e.onCloseDrawer()},retailer:f,dispatch:this.props.dispatch})))}}],[{key:"onPreventShowDrawer",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"onClickCancel",value:function(e,t){t.preventDefault(),t.stopPropagation()}},{key:"onClickDelete",value:function(e,t){t.preventDefault(),t.stopPropagation()}}]),a}(y.default.Component);t.RetailersNew=H;var O=(0,b.connect)(function(e){var t=e.retailers;return{retailersData:t}})(H);t.default=O},"6OJB":function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("q1tI")),n=r(a("4aNd")),s=function(){return l.default.createElement(n.default,null)};t.default=s},BZPu:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var l=r(a("/wGt"));a("+L6B");var n=r(a("2/Rp"));a("14J3");var s=r(a("BMrR"));a("jCWc");var i=r(a("kPKH"));a("OaEy");var o=r(a("2fM7"));a("y8nQ");var d=r(a("Vl3Y"));a("5NDa");var u=r(a("5rEg")),c=r(a("p0pE")),f=r(a("d6i3"));a("miYZ");var p=r(a("tsqr")),m=r(a("1l/V")),g=r(a("2Taf")),E=r(a("vZ4D")),h=r(a("MhPg")),R=r(a("l4Ni")),v=r(a("ujKo")),y=r(a("fFZ8"));a("tU7J");var M=r(a("wFql")),b=a("Y2fQ"),S=r(a("q1tI")),w=r(a("LvDl")),D=r(a("vOnD")),P=a("+n12"),T=a("X2rZ"),k=a("vu0V");function I(e){var t=C();return function(){var a,r=(0,v.default)(e);if(t){var l=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,l)}else a=r.apply(this,arguments);return(0,R.default)(this,a)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function x(){var e=(0,y.default)(["\n  padding: 5px 0;\n  margin-bottom: 0 !important;\n"]);return x=function(){return e},e}var L=M.default.Paragraph,F=(0,D.default)(L)(x()),A={marginBottom:0},H=function(e){(0,h.default)(a,e);var t=I(a);function a(){var e;(0,g.default)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return e=t.call.apply(t,[this].concat(l)),e.state={sending:!1},e.registerRetailer=function(t){t.preventDefault(),e.setState({sending:!0}),e.props.form.validateFieldsAndScroll(function(){var t=(0,m.default)(f.default.mark(function t(a,r){var l;return f.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=24;break}if(t.prev=1,!e.props.retailer){t.next=9;break}return r.globalId=e.props.retailer.globalId,t.next=6,(0,k.updateRetailer)(r);case 6:e.props.dispatch((0,T.refreshRetailers)()),t.next=12;break;case 9:return t.next=11,(0,k.registerARetailer)(r);case 11:e.props.dispatch((0,T.refreshRetailers)());case 12:l=(0,b.formatMessage)({id:"app.containers.Retailers.registerRetailerSuccessful"}),p.default.success(l),e.setState({sending:!1}),e.props.onCloseDrawer(),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](1),console.log("errObj: ",t.t0),e.setState({sending:!1});case 22:t.next=25;break;case 24:e.setState({sending:!1});case 25:case"end":return t.stop()}},t,null,[[1,18]])}));return function(e,a){return t.apply(this,arguments)}}())},e}return(0,E.default)(a,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldsValue,a=e.getFieldDecorator,r=e.isFieldsTouched,f=this.props.retailer,p=!0,m=(0,b.formatMessage)({id:"app.containers.Retailers.drawerTitle"}),g=(0,b.formatMessage)({id:"app.containers.Retailers.registerNow"});if(this.props.retailer&&this.props.retailer.globalId&&(m=(0,b.formatMessage)({id:"app.containers.Retailers.drawerTitleUpdate"}),g=(0,b.formatMessage)({id:"app.common.messages.save"})),r()){var E=t();E.globalId=f&&f.globalId,E=(0,c.default)({},f,E),E=(0,P.filterOutEmptyValue)(E),f=(0,P.filterOutEmptyValue)(f),p=!!w.default.isEqual(E,f)}return S.default.createElement("div",null,S.default.createElement(l.default,{destroyOnClose:!0,title:m,width:720,onClose:this.props.onCloseDrawer,visible:this.props.visiable},S.default.createElement("p",null,(0,b.formatMessage)({id:"app.containers.Retailers.registerRetailerDescription"})),S.default.createElement(d.default,{layout:"vertical",style:{paddingBottom:"35px"}},S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.containers.Retailers.retailerName"}),style:A},a("name",{initialValue:this.props.retailer&&this.props.retailer.name,rules:[{required:!0,message:(0,b.formatMessage)({id:"app.containers.Retailers.retailerNamePlaceholder"})},{min:1,max:100,message:(0,b.formatMessage)({id:"app.containers.Retailers.retailerNameInvalid"})}]})(S.default.createElement(u.default,{placeholder:(0,b.formatMessage)({id:"app.containers.Retailers.retailerNameExample"})})),S.default.createElement(F,null,(0,b.formatMessage)({id:"app.containers.Retailers.retailerNameDescription"}))),this.props.retailer?S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.containers.Retailers.globalId"}),style:A},a("globalId",{rules:[]})(S.default.createElement(L,{copyable:!0},this.props.retailer.globalId)),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.globalIdDescription"}))):"",S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.containers.Retailers.baseURL"}),style:A},a("baseURL",{initialValue:this.props.retailer&&this.props.retailer.baseURL,rules:[{required:!0,message:(0,b.formatMessage)({id:"app.containers.Retailers.baseURLEmptyError"})},{pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)([a-z0-9\.])*(:[0-9]{1,5})?(\/.*)?$/i,message:(0,b.formatMessage)({id:"app.containers.Retailers.baseURLEmptyError"})}]})(S.default.createElement(u.default,{placeholder:(0,b.formatMessage)({id:"app.containers.Retailers.baseURLExample"})})),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.baseURLDescription"}))),S.default.createElement("h3",null,S.default.createElement(b.FormattedMessage,{id:"app.containers.Retailers.callbackSectionTitle"})),S.default.createElement("p",null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.callbackDescription"})),S.default.createElement(s.default,{gutter:16},S.default.createElement(i.default,{span:8},S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethod"}),style:A},a("callback.method",{initialValue:w.default.get(this,"props.retailer.callback.method","POST"),rules:[{required:!0,message:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})}]})(S.default.createElement(o.default,{placeholder:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})},S.default.createElement(o.default.Option,{value:"GET"},"GET"),S.default.createElement(o.default.Option,{value:"POST"},"POST"),S.default.createElement(o.default.Option,{value:"PUT"},"PUT"),S.default.createElement(o.default.Option,{value:"DELETE"},"DELETE"))),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.httpMethodDescription"})))),S.default.createElement(i.default,{span:16},S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.common.messages.urlPath"}),style:A},a("callback.path",{initialValue:w.default.get(this,"props.retailer.callback.path","/apis/tasks"),rules:[{required:!0,message:(0,b.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})}]})(S.default.createElement(u.default,{placeholder:(0,b.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})})),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.common.messages.urlPathDescription"}))))),S.default.createElement("h3",null,S.default.createElement(b.FormattedMessage,{id:"app.common.messages.healthTitle"})),S.default.createElement("p",null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.healthDescription"})),S.default.createElement(s.default,{gutter:16},S.default.createElement(i.default,{span:8},S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethod"}),style:A},a("health.method",{initialValue:w.default.get(this,"props.retailer.health.method","GET"),rules:[{required:!0,message:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})}]})(S.default.createElement(o.default,{placeholder:(0,b.formatMessage)({id:"app.containers.Retailers.httpMethodPlaceHolder"})},S.default.createElement(o.default.Option,{value:"GET"},"GET"),S.default.createElement(o.default.Option,{value:"POST"},"POST"),S.default.createElement(o.default.Option,{value:"PUT"},"PUT"),S.default.createElement(o.default.Option,{value:"DELETE"},"DELETE"))),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.containers.Retailers.httpMethodDescription"})))),S.default.createElement(i.default,{span:16},S.default.createElement(d.default.Item,{label:(0,b.formatMessage)({id:"app.common.messages.urlPath"}),style:A},a("health.path",{initialValue:w.default.get(this,"props.retailer.health.path","/health"),rules:[{required:!0,message:(0,b.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})}]})(S.default.createElement(u.default,{placeholder:(0,b.formatMessage)({id:"app.common.messages.urlPathPlaceHolder"})})),S.default.createElement(F,null,S.default.createElement(b.FormattedHTMLMessage,{id:"app.common.messages.urlPathDescription"})))))),S.default.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},S.default.createElement(n.default,{onClick:this.props.onCloseDrawer,style:{marginRight:8}},S.default.createElement(b.FormattedMessage,{id:"app.common.messages.cancel"})),S.default.createElement(n.default,{disabled:p,loading:this.state.sending,onClick:this.registerRetailer,type:"primary"},g))))}}]),a}(S.default.Component),O=d.default.create()(H);t.default=O},FaxJ:function(e,t,a){"use strict";var r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,a("cWXX");var l=r(a("/ezw")),n=r(a("q1tI"));function s(){return n.default.createElement("div",{style:{padding:"0 24px"}},n.default.createElement(l.default,{title:!1,active:!0,paragraph:{width:"100%",rows:6}}))}},X2rZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshRetailers=l,t.refreshRetailersSuccess=n,t.refreshRetailersFail=s;var r=a("oqzx");function l(){return{type:r.REFRESH_RETAILERS}}function n(e){return{type:r.REFRESH_RETAILERS_SUCCESS,payload:e}}function s(e){return{type:r.REFRESH_RETAILERS_FAIL,error:e}}},oqzx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_RETAILERS_FAIL=t.REFRESH_RETAILERS_SUCCESS=t.REFRESH_RETAILERS=void 0;var r="retailers/refreshRetailers";t.REFRESH_RETAILERS=r;var l="retailers/refreshRetailersSuccess";t.REFRESH_RETAILERS_SUCCESS=l;var n="retailers/refreshRetailersFail";t.REFRESH_RETAILERS_FAIL=n},"z3/+":function(e,t,a){e.exports={"selected-row":"antd-pro-containers-retailers-style.css-selected-row"}}}]);