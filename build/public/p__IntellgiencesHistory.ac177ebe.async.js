(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"78Xg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetIntelligences=a,t.refreshIntelligences=i,t.refreshIntelligencesSuccess=s,t.refreshIntelligencesFail=r;var l=n("KeKd");function a(){return{type:l.RESET_INTELLIGENCES}}function i(){return{type:l.REFRESH_INTELLIGENCES}}function s(e){return{type:l.REFRESH_INTELLIGENCES_SUCCESS,total:e.total,intelligences:e.intelligences,nextCursor:e.nextCursor,previousCursor:e.previousCursor}}function r(e){return{type:l.REFRESH_INTELLIGENCES_FAIL,error:e}}},KeKd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_INTELLIGENCES_FAIL=t.REFRESH_INTELLIGENCES_SUCCESS=t.REFRESH_INTELLIGENCES=t.RESET_INTELLIGENCES=void 0;var l="intelligences/resetIntelligences";t.RESET_INTELLIGENCES=l;var a="intelligences/refreshIntelligences";t.REFRESH_INTELLIGENCES=a;var i="intelligences/refreshIntelligencesSuccess";t.REFRESH_INTELLIGENCES_SUCCESS=i;var s="intelligences/refreshIntelligencesFail";t.REFRESH_INTELLIGENCES_FAIL=s},m6yv:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.IntelligencesHistory=void 0,n("g9YV");var a=l(n("wCAj"));n("14J3");var i=l(n("BMrR"));n("qVdP");var s=l(n("jsC+"));n("jCWc");var r=l(n("kPKH"));n("Pwec");var o=l(n("CtXQ"));n("lUTK");var u=l(n("BvKs"));n("R9oj");var c=l(n("ECub")),d=l(n("p0pE")),f=l(n("d6i3"));n("miYZ");var g=l(n("tsqr")),m=l(n("1l/V"));n("sRBo");var p=l(n("kaz8"));n("+L6B");var h=l(n("2/Rp"));n("5NDa");var E=l(n("5rEg")),v=l(n("2Taf")),I=l(n("vZ4D")),y=l(n("MhPg")),S=l(n("l4Ni")),C=l(n("ujKo"));n("T2oS");var R=l(n("W9HT")),b=l(n("fFZ8")),w=n("Y2fQ"),M=n("Hx5s"),F=l(n("EVdn")),N=l(n("s/Ur")),H=l(n("q1tI")),L=l(n("LlRK")),k=l(n("LvDl")),T=n("MuoO"),x=l(n("Wgwc")),D=l(n("vOnD")),A=l(n("yOXu")),_=n("78Xg"),P=n("IvyP"),B=l(n("IE/S"));function K(e){var t=G();return function(){var n,l=(0,C.default)(e);if(t){var a=(0,C.default)(this).constructor;n=Reflect.construct(l,arguments,a)}else n=l.apply(this,arguments);return(0,S.default)(this,n)}}function G(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function O(){var e=(0,b.default)(["\n  padding: 100px 0;\n"]);return O=function(){return e},e}var z=D.default.div(O()),U=H.default.createElement("div",{style:{textAlign:"center",paddingTop:10,paddingBottom:10}},H.default.createElement(R.default,null)),j=function(e){(0,y.default)(n,e);var t=K(n);function n(e){var l;return(0,v.default)(this,n),l=t.call(this,e),l.search=function(){l.setState({selectedRowKeys:[],selectedRows:[]}),l.props.dispatch((0,_.resetIntelligences)()),l.loadMoreIntelligences(null)},l.handleReset=function(e,t){e(),l.setState({searchText:""}),delete l.filterConditions[t],l.search()},l.handleSearch=function(e,t,n){t(),l.setState({searchText:e}),l.filterConditions[n]=e,l.search()},l.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,a=t.selectedKeys,i=t.confirm,s=t.clearFilters;return H.default.createElement("div",{style:{padding:8}},H.default.createElement(E.default,{ref:function(e){l.searchInput=e},placeholder:"Search ".concat(e),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return l.handleSearch(a,i,e)},style:{width:250,marginBottom:8,display:"block"}}),H.default.createElement(h.default,{type:"primary",onClick:function(){return l.handleSearch(a&&a[0],i,e)},size:"small",style:{width:90,marginRight:8}},H.default.createElement(w.FormattedMessage,{id:"app.common.messages.search"})),H.default.createElement(h.default,{onClick:function(){return l.handleReset(s,e)},size:"small",style:{width:90}},H.default.createElement(w.FormattedMessage,{id:"app.common.messages.reset"})))},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return l.searchInput.select()})}}},l.getColumnCheckboxProps=function(e,t){return{filterDropdown:function(n){var a=n.setSelectedKeys,i=n.selectedKeys,s=n.confirm,r=n.clearFilters;return H.default.createElement("div",{style:{padding:8},className:"intelligences-checkboxgroup"},H.default.createElement(p.default.Group,{options:t,defaultValue:i,onChange:function(t){l.filterConditions[e]=t,a(t)}}),H.default.createElement("div",null,H.default.createElement(h.default,{type:"primary",onClick:function(){return l.handleSearch(i,s,e)},size:"small",style:{width:90,marginRight:8}},H.default.createElement(w.FormattedMessage,{id:"app.common.messages.search"})),H.default.createElement(h.default,{onClick:function(){return l.handleReset(r,e)},size:"small",style:{width:90}},H.default.createElement(w.FormattedMessage,{id:"app.common.messages.reset"}))))}}},l.props.dispatch((0,_.resetIntelligences)()),l.state={selectedRowKeys:[],selectedRows:[],loadingMore:!1,loadingIntelligencesData:!0,contentHeight:window.innerHeight,operationBtns:{pausing:!1,resuming:!1,deleting:!1}},l.filterConditions={},l.lastScrollHeight=0,l.resizeTimeoutHandler=void 0,(0,F.default)(window).unbind("resize"),(0,F.default)(window).bind("resize",function(){clearTimeout(l.resizeTimeoutHandler),l.resizeTimeoutHandler=setTimeout(function(){l.setState({contentHeight:window.innerHeight})},500)}),l}return(0,I.default)(n,[{key:"componentDidUpdate",value:function(){var e=this;(0,F.default)(".intelligence-table-container .ant-table-body").unbind("scroll"),(0,F.default)(".intelligence-table-container .ant-table-body").bind("scroll",function(){var t=(0,F.default)(".intelligence-table-container .ant-table-body").scrollTop(),n=(0,F.default)(".intelligence-table-container .ant-table-body").outerHeight(),l=document.querySelector(".intelligence-table-container .ant-table-body"),a=l.scrollHeight;a-t-n<200&&e.props.intelligences.nextCursor&&(e.state.loadingMore||(e.lastScrollHeight=a,e.loadMoreIntelligences()))})}},{key:"componentWillUnmount",value:function(){(0,F.default)(window).unbind("resize")}},{key:"componentDidMount",value:function(){this.initIntelligencesData()}},{key:"onDeleteAll",value:function(){var e=(0,m.default)(f.default.mark(function e(){var t;return f.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),this.setState({operationBtns:{pausing:!1,deleting:!0,resuming:!1}}),e.next=5,(0,P.deleteIntelligencesOrHistoryForManagementAPI)(this.filterConditions.url,t,this.filterConditions.state,!0);case 5:g.default.success((0,w.formatMessage)({id:"app.containers.Intelligences.deleteAllSuccessful"})),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}}),this.initIntelligencesData(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1}});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onRerunAll",value:function(){var e=(0,m.default)(f.default.mark(function e(){var t,n;return f.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.state.selectedRows&&this.state.selectedRows.length&&(t=this.state.selectedRows.map(function(e){return e.globalId})),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1,reruning:!0}}),e.next=5,(0,P.rerunIntelligencesForManagementAPI)(this.filterConditions.url,t,this.filterConditions.state);case 5:n=(0,w.formatMessage)({id:"app.containers.IntelligencesHistory.rerunAllSuccess"}),g.default.success(n),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1,reruning:!1}}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.setState({operationBtns:{pausing:!1,deleting:!1,resuming:!1,reruning:!1}});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"initIntelligencesData",value:function(){var e=this;this.props.dispatch((0,_.resetIntelligences)()),this.setState({loadingIntelligencesData:!0,selectedRowKeys:[],selectedRows:[]}),(0,P.getIntelligencesOrHistoryForManagementAPI)(void 0,this.filterConditions.url,this.filterConditions.state,50,!0).then(function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,_.refreshIntelligencesSuccess)(t))},function(t){e.setState({loadingIntelligencesData:!1}),e.props.dispatch((0,_.refreshIntelligencesFail)(t))})}},{key:"loadMoreIntelligences",value:function(e){var t=this;this.setState({loadingMore:!0}),void 0===e&&(e=this.props.intelligences.nextCursor),(0,P.getIntelligencesOrHistoryForManagementAPI)(e,this.filterConditions.url,this.filterConditions.state,50,!0).then(function(e){t.props.dispatch((0,_.refreshIntelligencesSuccess)(e)),t.setState({loadingMore:!1})},function(e){t.props.dispatch((0,_.refreshIntelligencesFail)(e)),t.setState({loadingMore:!1})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loadingIntelligencesData,l=t.contentHeight,f=t.loadingMore,g=this.props.intelligences,m=H.default.createElement(A.default,null),p=[(0,d.default)({title:"Target URL",dataIndex:"url",filteredValue:this.filterConditions.url},this.getColumnSearchProps("url")),(0,d.default)({title:(0,w.formatMessage)({id:"app.common.messages.state"}),dataIndex:"system.state",render:function(e){return H.default.createElement(B.default,{state:e})},filteredValue:this.filterConditions.state},this.getColumnCheckboxProps("state",[{label:(0,w.formatMessage)({id:"app.common.messages.stateDraft"}),value:"DRAFT"},{label:(0,w.formatMessage)({id:"app.common.messages.stateConfigured"}),value:"CONFIGURED"},{label:(0,w.formatMessage)({id:"app.common.messages.stateFinished"}),value:"FINISHED"},{label:(0,w.formatMessage)({id:"app.common.messages.stateRunning"}),value:"RUNNING"},{label:(0,w.formatMessage)({id:"app.common.messages.stateFailed"}),value:"FAILED"},{label:(0,w.formatMessage)({id:"app.common.messages.statePaused"}),value:"PAUSED"},{label:(0,w.formatMessage)({id:"app.common.messages.stateTimeout"}),value:"TIMEOUT"}])),{title:"Last Modified At",dataIndex:"system.modified",render:function(e){return(0,x.default)(e).format("YYYY/MM/DD HH:mm:ss")}}],E={selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,n){e.setState({selectedRowKeys:t,selectedRows:n})}};if(!n)if(g.data&&g.data.length||k.default.keys(this.filterConditions).length){var v=g&&g.total||0;this.state.selectedRows&&this.state.selectedRows.length&&(v=this.state.selectedRows.length);var I=!1;(this.state.operationBtns.pausing||this.state.operationBtns.resuming||this.state.operationBtns.deleting)&&(I=!0),v&&!n||(I=!0);var y=H.default.createElement(u.default,null,H.default.createElement(u.default.Item,null,H.default.createElement(h.default,{type:"link",onClick:function(){e.onRerunAll()},disabled:I,loading:this.state.operationBtns.reruning},H.default.createElement(w.FormattedMessage,{id:"app.containers.IntelligencesHistory.rerunAll",values:{intelligenceNumber:v}}))),H.default.createElement(u.default.Item,null,H.default.createElement(h.default,{type:"link",onClick:function(){e.onDeleteAll()},disabled:I,loading:this.state.operationBtns.deleting},H.default.createElement(w.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:v}})))),S=H.default.createElement("div",{style:{display:"inline-block"}},H.default.createElement("div",{style:{display:"inline-block"}},H.default.createElement("span",null,H.default.createElement(w.FormattedMessage,{id:"app.containers.Intelligences.showIntelligences",values:{intelligencesNumber:k.default.get(g,"data.length"),intelligencesTotal:g.total}}))),H.default.createElement(h.default,{type:"link",onClick:function(){return e.initIntelligencesData()},disabled:n},H.default.createElement(L.default,{date:g.modified}),H.default.createElement(o.default,{type:"sync",style:{verticalAlign:"middle",marginLeft:"5px"},spin:n})));m=H.default.createElement("div",{className:"intelligence-table-container"},H.default.createElement("div",null,H.default.createElement("div",{style:{paddingBottom:"15px"}},H.default.createElement(i.default,null,H.default.createElement(N.default,{minWidth:1028},H.default.createElement(r.default,{span:16},H.default.createElement(h.default,{onClick:function(){e.onRerunAll()},style:{marginLeft:"10px"},disabled:I,loading:this.state.operationBtns.reruning},H.default.createElement(w.FormattedMessage,{id:"app.containers.IntelligencesHistory.rerunAll",values:{intelligenceNumber:v}})),H.default.createElement(h.default,{onClick:function(){e.onDeleteAll()},style:{marginLeft:"10px"},disabled:I,loading:this.state.operationBtns.deleting},H.default.createElement(w.FormattedMessage,{id:"app.containers.Intelligences.deleteAll",values:{intelligenceNumber:v}}))),H.default.createElement(r.default,{span:8,style:{textAlign:"right"}},S)),H.default.createElement(N.default,{maxWidth:1028},H.default.createElement(r.default,{span:3},H.default.createElement(s.default,{overlay:y},H.default.createElement(h.default,null,H.default.createElement(o.default,{type:"menu"})))),H.default.createElement(r.default,{span:21,style:{textAlign:"right"}},S)))),H.default.createElement(a.default,{className:"",pagination:!1,bordered:!0,columns:p,rowSelection:E,dataSource:g.data,rowKey:function(e){return e.globalId},scroll:{y:l-310},onRow:function(e){return{onClick:function(){}}}}),f?U:""))}else m=H.default.createElement(z,null,H.default.createElement(c.default,{description:H.default.createElement("span",null,H.default.createElement(w.FormattedHTMLMessage,{id:"app.containers.IntelligencesHistory.empty"}))}));return H.default.createElement("div",{style:{padding:"20px"}},H.default.createElement(M.PageHeaderWrapper,null,m))}}]),n}(H.default.Component);t.IntelligencesHistory=j;var V=(0,T.connect)(function(e){var t=e.intelligences;return{intelligences:t}})(j);t.default=V},oZFx:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("m6yv")),i=l(n("q1tI")),s=function(){return i.default.createElement(a.default,null)};t.default=s},yOXu:function(e,t,n){"use strict";var l=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,n("cWXX");var a=l(n("/ezw")),i=l(n("q1tI"));function s(){return i.default.createElement("div",{style:{padding:"0 24px"}},i.default.createElement(a.default,{title:!1,active:!0,paragraph:{width:"100%",rows:6}}))}}}]);